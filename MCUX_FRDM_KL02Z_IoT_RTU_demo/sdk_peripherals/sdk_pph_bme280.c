/*! @file : sdk_pph_bme280.c
 * @author  Ernesto Andres Rincon Cruz
 * @version 1.0.0
 * @date    9/02/2021
 * @brief   Driver para sensor de temperatura BME280
 * @details
 *
*/
/*******************************************************************************
 * Includes
 ******************************************************************************/
#include "sdk_pph_bme280.h"

/*******************************************************************************
 * Definitions
 ******************************************************************************/


/*******************************************************************************
 * Private Prototypes
 ******************************************************************************/


/*******************************************************************************
 * External vars
 ******************************************************************************/


/*******************************************************************************
 * Local vars
 ******************************************************************************/


/*******************************************************************************
 * Private Source Code
 ******************************************************************************/


/*******************************************************************************
 * Public Source Code
 ******************************************************************************/
 status_t bme280WhoAmI(void) {
	status_t status;
	uint8_t i2c_data;

	status = i2c0MasterReadByte(&i2c_data, 1, BME280_ADDRESS, REG_ID);

	if (status == kStatus_Success) {
		if (i2c_data == 0x60)
			return (kStatus_Success);
		else
			return (kStatus_Fail);
	} else {
		return (status);
	}
}


 status_t bme280Init(void){
 	status_t status;
 	uint8_t i2c_data;

 	i2c_data = 0x03;
 	status = i2c0MasterWriteByte(&i2c_data, 1, BME280_ADDRESS, REG_CTRL_MEAS);

 	if(status!=kStatus_Success)
 		return(status);

 	return(kStatus_Success);
 }
